import{j as E,r as N,R as $}from"./react-0bfda011.js";import{c as k}from"./react-dom-04471a10.js";import{I as A,T as B,F as H}from"./react-icons-ad1a0d2e.js";import{u as j,a as D,P as K}from"./react-redux-da320f2e.js";import{Q as L}from"./react-toastify-5f669e26.js";import{c as C,a as M,b as W}from"./@reduxjs-289c7799.js";import{a as J}from"./axios-aba6f0e0.js";import{a as O,N as q,d as G,e as x}from"./react-router-ed63dfb7.js";import"./hoist-non-react-statics-b24a8e72.js";import"./react-is-1aacdabe.js";import{L as S,B as V}from"./react-router-dom-4248cb61.js";import"./scheduler-04ce0582.js";import"./use-sync-external-store-da90c88d.js";import"./clsx-1229b3e0.js";import"./immer-b106be54.js";import"./redux-17d3a502.js";import"./@babel-1a7d35ad.js";import"./redux-thunk-ef899f4c.js";import"./@remix-run-35d41228.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const d=E.Fragment,e=E.jsx,n=E.jsxs;function Q(){return e("div",{className:"",children:e("section",{class:"  w-[50%] m-auto mt-[12%] shadow-2xl bg-center bg-no-repeat bg-[url('https://www.herzing.edu/sites/default/files/styles/fp_640_288/public/images/blog/students_study_1.jpg.webp?itok=riENGJSB')] bg-gray-400 rounded-3xl bg-blend-multiply",children:n("div",{class:"  px-4 mx-auto max-w-screen-xl text-center py-24 lg:py-56",children:[e("h1",{class:"mb-4 text-4xl font-extrabold tracking-tight leading-none text-white md:text-5xl lg:text-6xl",children:"THE BANK"}),e("p",{class:"mb-8 text-lg font-normal text-gray-300 lg:text-xl sm:px-16 lg:px-48",children:"Prepare for your technical interviews with quizzes."}),e("div",{class:"flex flex-col space-y-4 sm:flex-row sm:justify-center sm:space-y-0 sm:space-x-4",children:e("a",{href:"/register",class:"w-[20%] m-auto shadow-2xl inline-flex justify-center hover:text-gray-900 items-center py-3 px-5 text-base font-medium text-center text-white rounded-lg border bg-black border-gray hover:bg-gray-100 focus:ring-4 focus:ring-gray-400",children:"Get Started"})})]})})})}const U=()=>e(d,{children:e("div",{children:e(Q,{})})}),X=async a=>{const r=await J.post("signup",a);return r.data&&localStorage.setItem("user",JSON.stringify(r.data)),r.data},Y=async a=>{const r=await J.post("login",a);return r.data&&localStorage.setItem("user",JSON.stringify(r.data)),r.data},Z=()=>{localStorage.removeItem("user")},P={register:X,logout:Z,login:Y},F=JSON.parse(localStorage.getItem("user")),ee={user:F||null,isError:!1,isSuccess:!1,isLoading:!1,message:""},w=C("auth/register",async(a,r)=>{try{return await P.register(a)}catch(t){const i=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return r.rejectWithValue(i)}}),v=C("auth/login",async(a,r)=>{try{return await P.login(a)}catch(t){const i=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return r.rejectWithValue(i)}}),z=C("auth/logout",async()=>{await P.logout()}),T=M({name:"auth",initialState:ee,reducers:{reset:a=>{a.isLoading=!1,a.isSuccess=!1,a.isError=!1,a.message=""}},extraReducers:a=>{a.addCase(w.pending,r=>{r.isLoading=!0}).addCase(w.fulfilled,(r,t)=>{r.isLoading=!1,r.isSuccess=!0,r.user=t.payload}).addCase(w.rejected,(r,t)=>{r.isLoading=!1,r.isError=!0,r.message=t.payload,r.user=null}).addCase(v.pending,r=>{r.isLoading=!0}).addCase(v.fulfilled,(r,t)=>{r.isLoading=!1,r.isSuccess=!0,r.user=t.payload}).addCase(v.rejected,(r,t)=>{r.isLoading=!1,r.isError=!0,r.message=t.payload,r.user=null}).addCase(z.fulfilled,r=>{r.user=null})}}),{reset:R}=T.actions,re=T.reducer;function _(){return e("div",{className:"loadingSpinnerContainer",children:e("div",{className:"loadingSpinner"})})}function te(){const[a,r]=N.useState({email:"",password:""}),{email:t,password:i}=a,s=O(),o=j(),{user:l,isLoading:m,isError:p,isSuccess:f,message:g}=D(c=>c.auth);N.useEffect(()=>{p&&L.error(g),(f||l)&&s("/dashboard"),o(R())},[l,p,f,g,s,o]);const h=c=>{r(b=>({...b,[c.target.name]:c.target.value}))},y=c=>{c.preventDefault(),o(v({email:t,password:i}))};return m?e(_,{}):n(d,{children:[n("section",{children:[n("h1",{children:[e(A,{})," Login"]}),e("p",{children:"Please login to your account"})]}),e("section",{className:"form",children:n("form",{onSubmit:y,children:[e("div",{className:"form-group",children:e("input",{type:"email",className:"form-control",id:"email",name:"email",value:t,placeholder:"Enter your email here",onChange:h})}),e("div",{className:"form-group",children:e("input",{type:"password",className:"form-control",id:"password",name:"password",value:i,placeholder:"Enter your password here",onChange:h})}),e("div",{className:"form-group",children:e("button",{type:"submit",className:"btn btn-block",children:"Submit"})})]})})]})}function se(){const[a,r]=N.useState({userName:"",email:"",password:"",password2:""}),{userName:t,email:i,password:s,password2:o}=a,l=O(),m=j(),{user:p,isLoading:f,isError:g,isSuccess:h,message:y}=D(u=>u.auth);N.useEffect(()=>{g&&L.error(y),(h||p)&&l("/dashboard"),m(R())},[p,g,h,y,l,m]);const c=u=>{r(I=>({...I,[u.target.name]:u.target.value}))},b=u=>{u.preventDefault(),s!==o?L.error("Passwords do not match!"):m(w({userName:t,email:i,password:s}))};return f?e(_,{}):n(d,{children:[n("section",{children:[n("h1",{children:[e(B,{})," Sign up"]}),e("p",{children:"Please create your account"})]}),e("section",{className:"form",children:n("form",{onSubmit:b,children:[e("div",{className:"form-group",children:e("input",{type:"text",className:"form-control",id:"name",name:"userName",value:t,placeholder:"Enter your name here",onChange:c})}),e("div",{className:"form-group",children:e("input",{type:"email",className:"form-control",id:"email",name:"email",value:i,placeholder:"Enter your email here",onChange:c})}),e("div",{className:"form-group",children:e("input",{type:"password",className:"form-control",id:"password",name:"password",value:s,placeholder:"Enter your password here",onChange:c})}),e("div",{className:"form-group",children:e("input",{type:"password",className:"form-control",id:"password2",name:"password2",value:o,placeholder:"Confirm password here",onChange:c})}),e("div",{className:"form-group",children:e("button",{type:"submit",className:"btn btn-block",children:"Submit"})})]})})]})}function ae(){return e(d,{children:e("h1",{children:"Dashboard"})})}function oe(){const a=O(),r=j(),{user:t}=D(s=>s.auth);return e(d,{children:n("header",{className:"bg-gray-200 navbar flex justify-between items-center p-4",children:[e("div",{className:"",children:e(S,{to:"/",children:e("h3",{children:"BANK"})})}),e("ul",{className:"menu menu-horizontal px-2",children:t?e("li",{children:n("button",{className:"bg-blue-900 hover:bg-blue-500 text-white py-2 px-4 rounded",onClick:()=>{r(z()),r(R()),a("/")},children:[e(H,{}),"Logout"]})}):n(d,{children:[e("li",{children:n(S,{to:"/login",className:"bg-blue-400 hover:bg-blue-500 text-white py-2 px-4 rounded m-2",children:[e(A,{}),"Login"]})}),e("li",{children:n(S,{to:"/register",className:"bg-blue-400 hover:bg-blue-500 text-white py-2 px-4 rounded m-2",children:[e(B,{}),"Sign up"]})})]})})]})})}const ne=JSON.parse(localStorage.getItem("user")),ie=({children:a})=>ne?a:e(q,{to:"/"});function ce(){return e(d,{children:n(V,{children:[e(oe,{}),e("div",{children:n(G,{children:[e(x,{path:"/",element:e(U,{})}),e(x,{path:"/login",element:e(te,{})}),e(x,{path:"/register",element:e(se,{})}),e(x,{path:"/dashboard",element:e(ie,{children:e(ae,{})})})]})})]})})}const le=W({reducer:{auth:re}});k.createRoot(document.getElementById("root")).render(e($.StrictMode,{children:e(K,{store:le,children:e(ce,{})})}));
